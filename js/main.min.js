// Combined JS: media.js + testimonial.js + services.js + small inline scripts
// media.js
let hamburgerContainer = document.querySelector('.hamburger');
let dropdownBox = document.getElementById('dropdownBox');
let exitIcon = document.getElementById('exitIcon');
let allAnchorTags = document.querySelectorAll('#navcon-mobile li a');
if (hamburgerContainer) {
    hamburgerContainer.addEventListener('click', function(){
        dropdownBox.style.display = 'flex';
        dropdownBox.classList.add('animate__rollIn')
    })
}
if (exitIcon) {
    exitIcon.addEventListener('click', function() {
        dropdownBox.style.display = 'none';
        dropdownBox.classList.remove('animate__rollIn');
    })
};
if(allAnchorTags){
    allAnchorTags.forEach(allAnchorTag => {
        allAnchorTag.addEventListener('click', function(){
            dropdownBox.style.display = 'none';
        })
    })
};

// testimonial.js
(function() {
  'use strict';
  document.addEventListener('DOMContentLoaded', function() {
    var sliderRoot = document.querySelector('.my-testimonial-slider');
    if (!sliderRoot) {
      return;
    }
    var slidesContainer = sliderRoot.querySelector('.mts-slides');
    var slides = Array.prototype.slice.call(
      sliderRoot.querySelectorAll('.mts-slide')
    );
    var prevBtn = sliderRoot.querySelector('.mts-control-prev');
    var nextBtn = sliderRoot.querySelector('.mts-control-next');
    var currentIndex = 0;
    var total = slides.length;
    function goToIndex(index) {
      if (index < 0) { index = total - 1; } else if (index >= total) { index = 0; }
      currentIndex = index;
      var offsetPercent = -currentIndex * 100;
      slidesContainer.style.transform = 'translateX(' + offsetPercent + '%)';
    }
    function onPrevClick(evt) { evt.preventDefault(); goToIndex(currentIndex - 1); }
    function onNextClick(evt) { evt.preventDefault(); goToIndex(currentIndex + 1); }
    prevBtn.addEventListener('click', onPrevClick);
    nextBtn.addEventListener('click', onNextClick);
    goToIndex(0);
  });
})();
let spanBoxs = document.querySelectorAll('#accordion_head span')
spanBoxs.forEach(spanBox => {
    spanBox.addEventListener('click', function(){
        let spanBoxparent = this.parentElement;
        let accordionHeadParent = spanBoxparent.parentElement;
        accordionHeadParent.children[1].classList.toggle('active');
    })
});

// services.js
// Fade-in animations on scroll
const faders = document.querySelectorAll('.fade-in');
const appearOptions = { threshold: 0.2, rootMargin: "0px 0px -50px 0px" };
const appearOnScroll = new IntersectionObserver((entries, appearOnScroll) => {
  entries.forEach(entry => {
    if (!entry.isIntersecting) return;
    entry.target.classList.add('visible');
    appearOnScroll.unobserve(entry.target);
  });
}, appearOptions);
faders.forEach(fader => { appearOnScroll.observe(fader); });
(function () {
  const openButtons = document.querySelectorAll(".property-btn");
  const modals = document.querySelectorAll(".prop-modal");
  const closeButtons = document.querySelectorAll(".prop-close");
  openButtons.forEach(btn => { btn.addEventListener("click", () => { const target = btn.getAttribute("data-modal"); document.getElementById(target).classList.add("active"); }); });
  closeButtons.forEach(btn => { btn.addEventListener("click", () => { btn.closest(".prop-modal").classList.remove("active"); }); });
  modals.forEach(modal => { modal.addEventListener('click', (e) => { if (e.target === modal) { modal.classList.remove('active'); } }); });
})();

/* End combined JS */
